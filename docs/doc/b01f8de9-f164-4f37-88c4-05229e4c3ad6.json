{
    "summary": "This code uses the Jina library to load an image, convert it into a tensor, and then splits the image into smaller chunks using sliding windows. It allows for optional conversion of these chunks back into a Document block and visualization as a sprite-like image collection. Strides can be adjusted for oversampling or downsampling purposes.",
    "details": [
        {
            "comment": "This code uses the Jina library to load an image, convert it into a tensor, and then splits the image into smaller chunks using sliding windows. It allows for optional conversion of these chunks back into a Document block and visualization as a sprite-like image collection. Strides can be adjusted for oversampling or downsampling purposes.",
            "location": "\"/media/root/Prima/works/vced/docs/src/code/jina_demo/image/7.4 \u5207\u5272\u5927\u578b\u56fe\u50cf.py\":0-21",
            "content": "from jina import Document\nd = Document(uri='complicated-image.jpeg')\nd.load_uri_to_image_tensor()\nprint(d.tensor.shape)  # (792, 1000, 3)\nd.convert_image_tensor_to_sliding_windows(window_shape=(64, 64))  # \u4f7f\u7528 64*64 \u7684\u6ed1\u7a97\u5207\u5272\u539f\u56fe\u50cf\uff0c\u5207\u5206\u51fa 13*16=208 \u4e2a\u56fe\u50cf\u5f20\u91cf\nprint(d.tensor.shape)  # (208, 64, 64, 3)\n# \u53ef\u4ee5\u901a\u8fc7 as_chunks=True\uff0c\u4f7f\u5f97\u4e0a\u8ff0 208 \u5f20\u56fe\u7247\u5f20\u91cf\u6dfb\u52a0\u5230 Document \u5757\u4e2d\u3002\n# PS\uff1a\u8fd0\u884c\u8fd9\u884c\u4ee3\u7801\u65f6\uff0c\u9700\u8981\u91cd\u65b0 load image tensor\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\nd = Document(uri='complicated-image.jpeg')\nd.load_uri_to_image_tensor()\nd.convert_image_tensor_to_sliding_windows(window_shape=(64, 64), as_chunks=True)\nprint(d.chunks)\nd.chunks.plot_image_sprites('simpsons-chunks.png')  # \u4f7f\u7528 plot_image_sprites \u5c06\u5404\u4e2a chunk \u7ed8\u5236\u6210\u56fe\u7247\u96c6\u56fe\u7247\n# \u56e0\u4e3a\u91c7\u7528\u4e86\u6ed1\u52a8\u7a97\u53e3\u626b\u63cf\u6574\u4e2a\u56fe\u50cf\uff0c\u4f7f\u7528\u4e86\u9ed8\u8ba4\u7684 stride\uff0c\u5207\u5206\u540e\u7684\u56fe\u50cf\u4e0d\u4f1a\u6709\u91cd\u53e0\uff0c\u6240\u4ee5\u91cd\u65b0\u7ed8\u5236\u51fa\u7684\u56fe\u548c\u539f\u56fe\u5dee\u522b\u4e0d\u5927\u3002\n# \u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e strides \u53c2\u6570\u8fdb\u884c\u8fc7\u91c7\u6837\u3002\nd.convert_image_tensor_to_sliding_windows(window_shape=(64, 64), strides=(10, 10), as_chunks=True)\nd.chunks.plot_image_sprites('simpsons-chunks-stride-10.png')"
        }
    ]
}