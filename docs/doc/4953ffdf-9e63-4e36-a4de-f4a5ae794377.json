{
    "summary": "This code loads the text from a URL into a Document object, splits it by newline characters, applies hashing for feature embedding, and then performs a search with Jaccard metric to find the top 5 most similar sentences in the DocumentArray. The results are printed as matching sentences and their corresponding Jaccard scores.",
    "details": [
        {
            "comment": "This code loads the text from a URL into a Document object, splits it by newline characters, applies hashing for feature embedding, and then performs a search with Jaccard metric to find the top 5 most similar sentences in the DocumentArray. The results are printed as matching sentences and their corresponding Jaccard scores.",
            "location": "\"/media/root/Prima/works/vced/docs/src/code/jina_demo/text/6.4 Demo: \u7b80\u5355\u7684\u6587\u672c\u5339\u914d.py\":0-20",
            "content": "from jina import Document, DocumentArray\nd = Document(\n    uri='https://www.gutenberg.org/files/1342/1342-0.txt').load_uri_to_text()  # \u94fe\u63a5\u662f\u50b2\u6162\u4e0e\u504f\u89c1\u7684\u7535\u5b50\u4e66\uff0c\u6b64\u5904\u5c06\u7535\u5b50\u4e66\u5185\u5bb9\u52a0\u8f7d\u5230 Document \u4e2d\nda = DocumentArray(Document(text=s.strip()) for s in d.text.split('\\n') if s.strip())  # \u6309\u7167\u6362\u884c\u8fdb\u884c\u5206\u5272\u5b57\u7b26\u4e32\nda.apply(lambda d: d.embed_feature_hashing())\nq = (\n    Document(text='she entered the room')  # \u8981\u5339\u914d\u7684\u6587\u672c\n    .embed_feature_hashing()  # \u901a\u8fc7 hash \u65b9\u6cd5\u8fdb\u884c\u7279\u5f81\u7f16\u7801\n    .match(da, limit=5, exclude_self=True, metric='jaccard', use_scipy=True)  # \u627e\u5230\u4e94\u4e2a\u4e0e\u8f93\u5165\u7684\u6587\u672c\u6700\u76f8\u4f3c\u7684\u53e5\u5b50\n)\nprint(q.matches[:, ('text', 'scores__jaccard')])  # \u8f93\u51fa\u5bf9\u5e94\u7684\u6587\u672c\u4e0e jaccard \u76f8\u4f3c\u6027\u5206\u6570\n# \u8f93\u51fa\u7ed3\u679c\uff1a\n# [['staircase, than she entered the breakfast-room, and congratulated', 'of the room.',\n#   'She entered the room with an air more than usually ungracious,',\n#   'entered the breakfast-room, where Mrs. Bennet was alone, than she', 'those in the room.'],\n#  [{'value': 0.6}, {'value': 0.6666666666666666}, {'value': 0.6666666666666666}, {'value': 0.6666666666666666},\n#   {'value': 0.7142857142857143}]]"
        }
    ]
}